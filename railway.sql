-- phpMyAdmin SQL Dump
-- version 3.5.2.2
-- http://www.phpmyadmin.net
--
-- Host: 127.0.0.1
-- Generation Time: Oct 13, 2016 at 03:20 PM
-- Server version: 5.5.27
-- PHP Version: 5.4.7

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

--
-- Database: `railway`


CREATE TABLE TRAIN(
    T_ID INT NOT NULL,
    T_NAME VARCHAR(30),
    T_TYPE VARCHAR(20),
    PRIMARY KEY(T_ID)
);

CREATE TABLE PASSENGERS (
  P_ID INT NOT NULL,
  P_NAME VARCHAR(30) NOT NULL,
  AGE INT,
  GENDER CHAR(1),
  DOB VARCHAR(25),
  EMAIL VARCHAR(30),
  PHONE_NUMBER VARCHAR(10),
  T_NO INT DEFAULT NULL,
  PRIMARY KEY (P_ID),
  FOREIGN KEY(T_NO) REFERENCES TRAIN(T_ID)
);

CREATE TABLE STATION(
    S_ID INT NOT NULL ,
    S_NAME VARCHAR(30),
    S_PLACE VARCHAR(20),
    S_CODE VARCHAR(5),
    PRIMARY KEY(S_ID)
);

CREATE TABLE SCHEDULE(
    SCHEDULE_ID INT NOT NULL,
    SOURCE VARCHAR(30),
    DESTINATION VARCHAR(30),
    START_TIME VARCHAR(10),
    END_TIME VARCHAR(10),
    TRAIN_ID INT,
    PRIMARY KEY(SCHEDULE_ID),
    FOREIGN KEY(TRAIN_ID) REFERENCES TRAIN(T_ID)
);

CREATE TABLE ROUTES(
    ROUTE_NO INT NOT NULL,
    SCHEDULE_ID INT NOT NULL,
    S_ID INT NOT NULL,
    TRAIN_ID INT,
    FOREIGN KEY(SCHEDULE_ID) REFERENCES SCHEDULE(SCHEDULE_ID),
    FOREIGN KEY(S_ID) REFERENCES STATION(S_ID),
    FOREIGN KEY(TRAIN_ID) REFERENCES TRAIN(T_ID)
);

CREATE TABLE TICKET(
    PNR INT NOT NULL DEFAULT '0' ,
    COACH VARCHAR(30),
    SEAT_NO INT,
    STATUS VARCHAR(10) DEFAULT 'WAITING',
    FARE DECIMAL(6,2),
    START_JOURNEY VARCHAR(20),
    P_ID INT,
    
    PRIMARY KEY(PNR),
    FOREIGN KEY(P_ID) REFERENCES PASSENGERS(P_ID)

);

INSERT INTO TRAIN VALUES(4592,'RAJDHANI','SUPERFAST');
INSERT INTO TRAIN VALUES(1002,'SHATABDI','EXPRESS');
INSERT INTO TRAIN VALUES(55432,'INTERCITY', 'PASSENGER');
INSERT INTO TRAIN VALUES(7986,'GARIB RATH','EXPRESS');
INSERT INTO TRAIN VALUES(23311,'DURONTO','AC SUPERFAST');
INSERT INTO TRAIN VALUES(34444,'NETRAVATI','LOCAL');

INSERT INTO PASSENGERS VALUES(17,'SMITHA K V',23,'F',12-02-1999,'smithakv@gmail.com','9865523245',4592);
INSERT INTO PASSENGERS VALUES(20,'JOHN PINTO',47,'M',22-05-1975,'john22@gmail.com','8954533367',7986);
INSERT INTO PASSENGERS VALUES(39,'AKASH SAINI',31,'M',01-11-1991,'saini0111@gmail.com','7664660972',23311);
INSERT INTO PASSENGERS VALUES(44,'KISHORE PATIL',53,'M',15-09-1969,'kishorepatil15@gmail.com','9453568768',55432);
INSERT INTO PASSENGERS VALUES(50,'MAYURI B',34,'F',04-04-1988,'mayurib@gmail.com','8988753213',55432);
INSERT INTO PASSENGERS VALUES(65,'ASHA RAJ',29,'F',12-10-1993,'rajasha10@gmail.com','9876532777',34444);





INSERT INTO STATION VALUES(1,'DELHI JUNCTION','DELHI','DEL');
INSERT INTO STATION VALUES(2,'MUMBAI CENTRAL','MAHARASHTRA','MCT');
INSERT INTO STATION VALUES(3,'JAIPUR','RAJASTHAN','JAI');
INSERT INTO STATION VALUES(4,'HYDERABAD','ANDHRA PRADESH','HYD');
INSERT INTO STATION VALUES(5,'COIMBATORE CENTRAL','TAMILNADU','CBE');
INSERT INTO STATION VALUES(6,'MANGALURU JUNCTION','KARNATAKA','MJN');
INSERT INTO STATION VALUES(7,'KOLKATA','WEST BENGAL','KOL');
INSERT INTO STATION VALUES(8,'AHEMADABAD JUNCTION','GUJURAT','AJN');
INSERT INTO STATION VALUES(9,'THIRUVANTAPURAM','KERALA','THI');
INSERT INTO STATION VALUES(10,'ERANAKULAM','KERALA','ERK');


INSERT INTO SCHEDULE VALUES(101,'DELHI JUNCTION','KOLKATA','14:50','09:55',4592);
INSERT INTO SCHEDULE VALUES(102,'JAIPUR','DELHI JUNCTION','08:35','14:30',23311);
INSERT INTO SCHEDULE VALUES(103,'MANGALURU JUNCTION','COIMBATORE CENTRAL','23:30','07:00',55432);
INSERT INTO SCHEDULE VALUES(105,'MUMBAI CENTRAL','AHEMADABAD JUNCTION','06:20','12:40',1002);
INSERT INTO SCHEDULE VALUES(106,'HYDERABAD','THIRUVANTAPURAM','12:20','11:30',7986);
INSERT INTO SCHEDULE VALUES(108,'MANGALURU JUNCTION','ERANAKULAM','04:25','12:35',34444);




INSERT INTO ROUTES VALUES(1,101,1,4592);
INSERT INTO ROUTES VALUES(2,103,6,55432);
INSERT INTO ROUTES VALUES(5,105,2,1002);
INSERT INTO ROUTES VALUES(4,108,6,34444);
INSERT INTO ROUTES VALUES(5,102,3,23311);
INSERT INTO ROUTES VALUES(4,106,4,7986);




INSERT INTO TICKET VALUES(80561249,'3B',20 ,'CONFIRMED', 500,'01-05-2023', 50);
INSERT INTO TICKET VALUES(81504058,'3A',05,'CONFIRMED', 350, '07-08-2023',44);
INSERT INTO TICKET VALUES(88515998,'SL',13 ,'CONFIRMED', 200, '09-10-2023',17);
INSERT INTO TICKET VALUES(89343843,'GENERAL',12,'CONFIRMED', 100, '10-01-2023',20);
INSERT INTO TICKET VALUES(87555454,'1A',16 ,'CONFIRMED', 125, '09-10-2023',65);
INSERT INTO TICKET VALUES(85454545,'2B',25,'CONFIRMED', 275, '10-01-2023',39);









